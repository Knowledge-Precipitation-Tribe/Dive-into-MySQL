# 常用运算符详解

MySQL数据库中的表结构确立后，表中的数据代表的意义就已经确定。而通过 MySQL 运算符进行运算，就可以获取到表结构以外的另一种数据。

例如，学生表中存在一个 birth 字段，这个字段表示学生的出生年份。而运用 MySQL 的算术运算符用当前的年份减学生出生的年份，那么得到的就是这个学生的实际年龄数据。

 MySQL 支持 4 种运算符，分别是：

1. 算术运算符， 执行算术运算，例如：加、减、乘、除等。
2. 比较运算符，包括大于、小于、等于或者不等于，等等。主要用于数值的比较、字符串的匹配等方面。例如：LIKE、IN、BETWEEN AND 和 IS NULL 等都是比较运算符，还包括正则表达式的 REGEXP 也是比较运算符。
3. 逻辑运算符，包括与、或、非和异或等逻辑运算符。其返回值为布尔型，真值（1或true）和假值（0 或false）。位运算符，包括按位与、按位或、按位取反、按位异或、按位左移和按位右移等位运算符。位运算必须先将数据转换为二进制，然后在二进制格式下进行操作,运算完成后，将二进制的值转换为原来的类型，返回给用户。

##  算术运算符

 算术运算符是 SQL 中最基本的运算符，MySQL中的算术运算符如下表所示。

|  算术运算符 |  说明 |
| :--- | :--- |
|  + |  加法运算 |
|  - |  减法运算 |
|  \* |  乘法运算 |
|  / |  除法运算，返回商 |
|  % |  求余运算，返回余数 |

##  比较运算符

 比较运算符的语法格式为：

```text
 <表达式1> {= | < | <= | > | >= | <=> | < > | !=} <表达式2>
```

 MySQL 支持的比较运算符如下表所示。

|  比较运算符 |  说明 |
| :--- | :--- |
|  = |  等于 |
|  &lt; |  小于 |
|  &lt;= |  小于等于 |
|  &gt; |  大于 |
|  &gt;= |  大于等于 |
|  &lt;=&gt; |  安全的等于，不会返回 UNKNOWN |
|  &lt;&gt; 或!= |  不等于 |
|  IS NULL 或 ISNULL |  判断一个值是否为 NULL |
|  IS NOT NULL |  判断一个值是否不为 NULL |
|  LEAST |  当有两个或多个参数时，返回最小值 |
|  GREATEST |  当有两个或多个参数时，返回最大值 |
|  BETWEEN AND |  判断一个值是否落在两个值之间 |
|  IN |  判断一个值是IN列表中的任意一个值 |
|  NOT IN |  判断一个值不是IN列表中的任意一个值 |
|  LIKE |  通配符匹配 |
|  REGEXP |  正则表达式匹配 |

 下面分别介绍不同的比较运算符的使用方法。

###  1\) 等于运算符“=”

 等号“=”用来判断数字、字符串和表达式是否相等。如果相等，返回值为 1，否则返回值为 0。

 数据进行比较时，有如下规则：

*  若有一个或两个参数为 NULL，则比较运算的结果为 NULL。
*  若同一个比较运算中的两个参数都是字符串，则按照字符串进行比较。
*  若两个参数均为正数，则按照整数进行比较。
*  若一个字符串和数字进行相等判断，则 MySQL 可以自动将字符串转换成数字。

###  2\) 安全等于运算符“&lt;=&gt;”

 用于比较两个表达式的值。当两个表达式的值中有一个为空值或者都为空值时，将返回 UNKNOWN。

 对于运算符“&lt;=&gt;”，当两个表达式彼此相等或都等于空值时，比较结果为 TRUE；若其中一个是空值或者都是非空值但不相等时，则为 FALSE，不会出现 UNKNOWN 的情况。

###  3\) 不等于运算符“&lt;&gt;”或者“!=”

 “&lt;&gt;”或者“!=”用于数字、字符串、表达式不相等的判断。如果不相等，返回值为 1；否则返回值为 0。这两个运算符不能用于判断空值（NULL）。

###  4\) 小于或等于运算符“&lt;=”

 “&lt;=”用来判断左边的操作数是否小于或等于右边的操作数。如果小于或等于，返回值为 1；否则返回值为 0。“&lt;=”不能用于判断空值。

###  5\) 小于运算符“&lt;”

 “&lt;”用来判断左边的操作数是否小于右边的操作数。如果小于，返回值为 1；否则返回值为 0。“&lt;”不能用于判断空值。

###  6\) 大于或等于运算符“&gt;=”

 “&gt;=”用来判断左边的操作数是否大于或等于右边的操作数。如果大于或等于，返回值为 1；否则返回值为 0。“&gt;=”不能用于判断空值。

###  7\) 大于运算符“&gt;”

 “&gt;”用来判断左边的操作数是否大于右边的操作数。如果大于，返回值为 1；否则返回值为 0。“&gt;”不能用于判断空值。

###  8\) IS NULL（或者 ISNULL）

 IS NULL 和 ISNULL 用于检验一个值是否为 NULL，如果为 NULL，返回值为 1；否则返回值为 0。

###  9\) IS NOT NULL

 IS NOT NULL 用于检验一个值是否为非 NULL，如果为非 NULL，返回值为 1；否则返回值为 0。

###  10\) BETWWEN AND

 语法格式为：

```text
 <表达式> BETWEEN <最小值> AND <最大值>
```

若`<表达式>`大于或等于`<最小值>`，且小于或等于`<最大值>`，则 BETWEEN 的返回值为 1；否则返回值为 0。

###  11\) LEAST

语法格式为：

```text
LEAST(<值1>,<值2>,…,<值n>)
```

其中，值 n 表示参数列表中有 n 个值。存在两个或多个参数的情况下，返回最小值。若任意一个自变量为 NULL，则 LEAST\(\) 的返回值为 NULL。

###  12\) GREATEST

语法格式为

```text
GREATEST (<值1>,<值2>,…,<值n>)
```

### 13\) IN

 IN 运算符用来判断操作数是否为 IN 列表中的一个值。如果是，返回值为 1；否则返回值为 0。

###  14\) NOT IN

 NOT IN 运算符用来判断表达式是否为 IN 列表中的一个值。如果不是，返回值为 1；否则返回值为 0。

##  逻辑运算符

 在 SQL 语言中，所有逻辑运算符求值所得的结果均为 TRUE、FALSE 或 NULL。在 MySQL 中分别体现为 1（TRUE）、0（FALSE）和 NULL。

 MySQL 中的逻辑运算符如下表所示。

|  逻辑运算符 |  说明 |
| :--- | :--- |
|  NOT 或者 ! |  逻辑非 |
|  AND 或者 && |  逻辑与 |
|  OR 或者 \|\| |  逻辑或 |
|  XOR |  逻辑异或 |

 下面分别介绍不同的逻辑运算符的使用方法。

###  1\) NOT 或者 !

 逻辑非运算符 NOT 或者 !，表示当操作数为 0 时，返回值为 1；当操作数为非零值时，返回值为 0；当操作数为 NULL 时，返回值为 NULL。

###  2\) AND 或者 &&

 逻辑与运算符 AND 或者 &&，表示当所有操作数均为非零值并且不为 NULL 时，返回值为 1；当一个或多个操作数为 0 时，返回值为 0；其余情况返回值为 NULL。

###  3\) OR 或者 \|\|

 逻辑或运算符 OR 或者 \|\|，表示当两个操作数均为非 NULL 值且任意一个操作数为非零值时，结果为 1，否则结果为 0；当有一个操作数为 NULL 且另一个操作数为非零值时，结果为 1，否则结果为 NULL；当两个操作数均为 NULL 时，所得结果为 NULL。

###  4\) XOR

 逻辑异或运算符 XOR。当任意一个操作数为 NULL 时，返回值为 NULL；对于非 NULL 的操作数，若两个操作数都不是 0 或者都是 0 值，则返回结果为 0；若一个为 0，另一个不为非 0，则返回结果为 1。

##  位运算符

 位运算符是用来对二进制字节中的位进行移位或者测试处理的。

 MySQL 中提供的位运算符如下表所示。

|  位运算符 |  说明 |
| :--- | :--- |
|  \| |  按位或 |
|  & |  按位与 |
|  ^ |  按位异或 |
|  &lt;&lt; |  按位左移 |
|  &gt;&gt; |  按位右移 |
|  ~ |  按位取反，反转所有比特 |

 下面分别介绍不同的位运算符的使用方法。

###  1\) 位或运算符“\|”

 位或运算的实质是将参与运算的两个数据按对应的二进制数逐位进行逻辑或运算。若对应的二进制位有一个或两个为 1，则该位的运算结果为 1，否则为 0。

###  2\) 位与运算符“&”

 位与运算的实质是将参与运算的两个数据按对应的二进制数逐位进行逻辑与运算。若对应的二进制位都为 1，则该位的运算结果为 1，否则为 0。

###  3\) 位异或运算符“^”

 位异或运算的实质是将参与运算的两个数据按对应的二进制数逐位进行逻辑异或运算。对应的二进制位不同时，对应位的结果才为 1。如果两个对应位都为 0 或者都为 1，则对应位的结果为 0。

###  4\) 位左移运算符“&lt;&lt;”

 位左移运算符“&lt;&lt;”使指定的二进制值的所有位都左移指定的位数。左移指定位数之后，左边高位的数值将被移出并丢弃，右边低位空出的位置用 0 补齐。

 语法格式为`表达式<<n`，这里 n 指定值要移位的位数。

###  5\) 位右移运算符“&gt;&gt;”

 位右移运算符“&gt;&gt;”使指定的二进制值的所有位都右移指定的位数。右移指定位数之后，右边高位的数值将被移出并丢弃，左边低位空出的位置用 0 补齐。

 语法格式为`表达式>>n`，这里 n 指定值要移位的位数。

###  6\) 位取反运算符“~”

 位取反运算符的实质是将参与运算的数据按对应的二进制数逐位反转，即 1 取反后变 0，0 取反后变为 1。

 运算符的优先级决定了不同的运算符在表达式中计算的先后顺序，下表列出了 MySQL 中的各类运算符及其优先级。

|  优先级由低到高排列 |  运算符 |
| :--- | :--- |
|  1 |  =\(赋值运算）、:= |
|  2 |  II、OR |
|  3 |  XOR |
|  4 |  &&、AND |
|  5 |  NOT |
|  6 |  BETWEEN、CASE、WHEN、THEN、ELSE |
|  7 |  =\(比较运算）、&lt;=&gt;、&gt;=、&gt;、&lt;=、&lt;、&lt;&gt;、!=、 IS、LIKE、REGEXP、IN |
|  8 |  \| |
|  9 |  & |
|  10 |  &lt;&lt;、&gt;&gt; |
|  11 |  -\(减号）、+ |
|  12 |  \*、/、% |
|  13 |  ^ |
|  14 |  -\(负号）、〜（位反转） |
|  15 |  ! |

 可以看出，不同运算符的优先级是不同的。一般情况下，级别高的运算符优先进行计算，如果级别相同，MySQL 按表达式的顺序从左到右依次计算。

 另外，在无法确定优先级的情况下，可以使用圆括号“\(\)”来改变优先级，并且这样会使计算过程更加清晰。

